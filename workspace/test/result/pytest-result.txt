============================= test session starts ==============================
platform darwin -- Python 3.11.14, pytest-9.0.2, pluggy-1.6.0 -- /Users/williamwatson/Documents/GitHub/mcp-sed-awk/venv/bin/python3.11
cachedir: .pytest_cache
rootdir: /Users/williamwatson/Documents/GitHub/mcp-sed-awk
configfile: pyproject.toml
plugins: mock-3.15.1, anyio-4.12.0, asyncio-1.3.0, cov-7.0.0
asyncio: mode=Mode.AUTO, debug=False, asyncio_default_fixture_loop_scope=None, asyncio_default_test_loop_scope=function
collecting ... collected 19 items

tests/integration/test_server_integration.py::test_server_init_with_argv_directories PASSED [  5%]
tests/integration/test_server_integration.py::test_server_fallback_to_env_var PASSED [ 10%]
tests/integration/test_server_integration.py::test_server_default_current_directory PASSED [ 15%]
tests/integration/test_server_integration.py::test_all_tools_registered PASSED [ 21%]
tests/integration/test_server_integration.py::test_fail_fast_missing_binaries PASSED [ 26%]
tests/integration/test_server_integration.py::test_server_full_lifecycle PASSED [ 31%]
tests/integration/test_server_integration.py::test_config_precedence PASSED [ 36%]
tests/integration/test_server_integration.py::test_binary_validation_during_init PASSED [ 42%]
tests/integration/test_tools_integration.py::test_sed_substitute_backup_and_edit PASSED [ 47%]
tests/integration/test_tools_integration.py::test_sed_substitute_rollback_on_failure PASSED [ 52%]
tests/integration/test_tools_integration.py::test_preview_sed_no_modification PASSED [ 57%]
tests/integration/test_tools_integration.py::test_awk_transform_field_extraction PASSED [ 63%]
tests/integration/test_tools_integration.py::test_diff_files_unified_format PASSED [ 68%]
tests/integration/test_tools_integration.py::test_list_allowed_directories_sorted PASSED [ 73%]
tests/integration/test_tools_integration.py::test_large_file_rejection PASSED [ 78%]
tests/integration/test_tools_integration.py::test_line_range_restriction PASSED [ 84%]
tests/integration/test_tools_integration.py::test_full_validation_chain PASSED [ 89%]
tests/integration/test_tools_integration.py::test_security_error_propagation PASSED [ 94%]
tests/integration/test_tools_integration.py::test_validation_error_propagation PASSED [100%]

============================== 19 passed in 0.37s ==============================
